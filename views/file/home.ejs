<% layout("layouts/boilerplate") %>

<body>
    <!-- Hero Section -->
    <section class="hero">
        <img src="/assests/Wallpaper.jpg">
        <h1>Be Prepared. Stay Safe. Respond Effectively.</h1>
        <p>Empowering you with the tools and knowledge to navigate natural disasters.</p>
        <div class="cta-buttons">
            <a href="#" class="btn">Get Started</a>
            <a href="#" class="btn">Sign Up for Alerts</a>
        </div>
        <div class="cta-container">
            <button class="cta-sosbutton" onclick="callEmergencyNumber()">SOS</button>
        </div>
    </section>

    <section class="resources">
        <h2>Learn How to Stay Safe</h2>
        <div class="container">
            <div class="row">
                <div class="col-md-6 mb-4 d-flex">
                    <div class="card" style="width: 100%;">
                        <img src="https://th.bing.com/th/id/OIP.J_KmfdlBfA52rF2DPDGgNgHaFj?rs=1&pid=ImgDetMain" class="card-img-top" alt="Cyclone">
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title">Cyclone</h5>
                            <p class="card-text">Learn about cyclones, their impacts, and how to prepare.</p>
                            <a href="../disaster_details/cyclone.html" class="btn btn-primary mt-auto">Learn More</a>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 mb-4 d-flex">
                    <div class="card" style="width: 100%;">
                        <img src="https://image.cnbcfm.com/api/v1/image/104043968-GettyImages-114571378.jpg?v=1529473040" class="card-img-top" alt="Tsunami">
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title">Tsunami</h5>
                            <p class="card-text">Understand tsunamis, their warning signs, and safety tips.</p>
                            <a href="../disaster_details/tsunami.html" class="btn btn-primary mt-auto">Learn More</a>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 mb-4 d-flex">
                    <div class="card" style="width: 100%;">
                        <img src="https://th.bing.com/th/id/R.e01a6cf85cb3274aa46439d5488f99d9?rik=h%2bMqbB%2bYuVi2lQ&riu=http%3a%2f%2fcrisisboom.files.wordpress.com%2f2012%2f02%2fphilippines-earthquake.jpg&ehk=qUovbD9x%2bZ2kxy%2fYrWyV7aLBSwDoNJAU65TSWFkiTKs%3d&risl=&pid=ImgRaw&r=0" class="card-img-top" alt="Earthquake">
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title">Earthquake</h5>
                            <p class="card-text">Find out how to stay safe during an earthquake and prepare your family.</p>
                            <a href="../disaster_details/earthquake.html" class="btn btn-primary mt-auto">Learn More</a>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 mb-4 d-flex">
                    <div class="card" style="width: 100%;">
                        <img src="https://th.bing.com/th/id/OIP.L31SIZ5dt4SyGTwE1fDyqwHaE8?rs=1&pid=ImgDetMain" class="card-img-top" alt="Flood">
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title">Flood</h5>
                            <p class="card-text">Learn how to prepare for floods and what to do in an emergency.</p>
                            <a href="../disaster_details/flood.html" class="btn btn-primary mt-auto">Learn More</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script src="public/js/callcenter.js"></script> <!-- Include the JS file -->

    <script>
        function callEmergencyNumber() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function(position) {
                    const lat = position.coords.latitude;
                    const lng = position.coords.longitude;

                    // Call function to get state based on coordinates
                    let userState = getStateFromCoordinates(lat, lng);

                    // Fetch emergency number based on state
                    let emergencyNumber = getEmergencyNumber(userState);
                    if (emergencyNumber !== "Emergency number not available") {
                        // Initiate the call
                        window.location.href = `tel:${emergencyNumber}`;
                    } else {
                        alert('Emergency number not available for your location.');
                    }
                }, function() {
                    alert('Unable to retrieve your location. Please allow location access.');
                });
            } else {
                alert('Geolocation is not supported by this browser.');
            }
        }

        function getStateFromCoordinates(lat, lng) {
            // Simplified example for determining the state based on coordinates
            if (lat >= 12.0 && lat <= 15.0 && lng >= 74.0 && lng <= 77.0) {
                return "Karnataka"; 
            } else if (lat >= 28.0 && lat <= 30.0 && lng >= 76.0 && lng <= 78.0) {
                return "Delhi"; 
            }
            // Add more states and their coordinates here

            return "State not recognized";
        }
    </script>
</body>
